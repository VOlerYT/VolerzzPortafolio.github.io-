<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MCreator Web Lite Modular - Versión Completa</title>
<style>
  body { font-family: Arial, sans-serif; margin:0; background:#e6f2ff; color:#333; }
  header { background:#1e3a5f; color:white; padding:1.2em; text-align:center; box-shadow:0 3px 8px rgba(0,0,0,0.3); }
  main { padding:1.2em; max-width:1200px; margin:0 auto; }
  .mode-selection { text-align:center; margin:3em 0; }
  .mode-btn { padding:1.5em 3em; margin:1em; cursor:pointer; border:none; border-radius:12px; background:#3a6ea5; color:white; font-weight:bold; font-size:1.4em; transition:0.3s; box-shadow:0 6px 15px rgba(0,0,0,0.2); }
  .mode-btn:hover { background:#1e3a5f; transform:translateY(-5px); }
  .mode-content { display:none; min-height:80vh; }
  .mode-content.active { display:block; }
  nav { display:flex; flex-wrap:wrap; justify-content:center; gap:0.8em; margin-bottom:1.5em; }
  nav button { flex:1 1 140px; padding:1em; cursor:pointer; border:none; border-radius:8px; background:#3a6ea5; color:white; font-weight:bold; transition:0.2s; font-size:1.1em; }
  nav button.active, nav button:hover { background:#1e3a5f; }
  section { display:none; background:white; padding:1.8em; border-radius:12px; box-shadow:0 4px 12px rgba(0,0,0,0.15); margin-bottom:1.5em; }
  section.active { display:block; }
  input, select, textarea, button { width:100%; margin:0.7em 0; padding:0.8em; box-sizing:border-box; border-radius:8px; border:1px solid #ccc; font-size:1em; }
  textarea { height:180px; resize:vertical; font-family:monospace; }
  img.preview { max-width:200px; margin:1em 0; display:block; border:2px solid #aaa; border-radius:10px; box-shadow:0 3px 8px rgba(0,0,0,0.2); }
  button { background:#3a6ea5; color:white; font-weight:bold; cursor:pointer; border:none; transition:0.3s; }
  button:hover { background:#1e3a5f; }
  .subsection { background:#f8f9fa; padding:1.5em; border-radius:10px; margin:1.2em 0; border:1px solid #eee; }
  .warning { background:#fff3cd; color:#664d03; padding:1.2em; border-radius:10px; margin:1.5em 0; border:1px solid #ffeeba; font-weight:bold; }
  .tip { background:#e6f2ff; padding:1.2em; border-radius:10px; margin:1em 0; }
  .recipe-grid { display:grid; grid-template-columns:repeat(3, 60px); gap:0.5em; margin:1em 0; }
  .recipe-grid input { height:60px; text-align:center; font-size:0.8em; }
  .procedure-step { margin:1em 0; }
</style>
</head>
<body>

<header>
  <h1>MCreator Web Lite Modular</h1>
  <p>Versión completa. Todo funciona en ambos modos con muchas opciones.</p>
</header>

<main>
  <div class="mode-selection">
    <button class="mode-btn" onclick="selectMode('no-code')">Modo No Programar<br><small>(Visual – elige opciones y sube archivos)</small></button>
    <button class="mode-btn" onclick="selectMode('code')">Modo Programar<br><small>(Avanzado – edita código)</small></button>
  </div>

  <!-- Modo No Programar (todo visual, ahora con todas las pestañas funcionando) -->
  <div id="no-code-mode" class="mode-content active">
    <nav id="nav-no">
      <button class="tab-btn active" data-tab="blocks-no">Bloques</button>
      <button class="tab-btn" data-tab="items-no">Items</button>
      <button class="tab-btn" data-tab="mobs-no">Mobs</button>
      <button class="tab-btn" data-tab="armor-no">Armaduras</button>
      <button class="tab-btn" data-tab="gui-no">GUI</button>
      <button class="tab-btn" data-tab="recipes-no">Recetas</button>
      <button class="tab-btn" data-tab="commands-no">Comandos</button>
      <button class="tab-btn" data-tab="procedures-no">Procedimientos</button>
      <button class="tab-btn" data-tab="dimensions-no">Dimensiones</button>
      <button class="tab-btn" data-tab="biomes-no">Biomas</button>
      <button class="tab-btn" data-tab="structures-no">Estructuras</button>
      <button class="tab-btn" data-tab="export-no">Exportar</button>
    </nav>

    <section id="blocks-no" class="active">
      <h2>Crear Bloque</h2>
      <input type="text" id="blockName-no" placeholder="Nombre del bloque">
      <select id="blockMaterial-no">
        <option value="stone">Piedra</option>
        <option value="wood">Madera</option>
        <option value="metal">Metal</option>
        <option value="glass">Vidrio</option>
        <option value="plant">Planta</option>
      </select>
      <input type="number" id="blockHardness-no" placeholder="Dureza" value="2.0" step="0.5">
      <input type="number" id="blockResistance-no" placeholder="Resistencia" value="10">
      <select id="blockLight-no">
        <option value="0">Sin luz</option>
        <option value="7">Luz media</option>
        <option value="15">Luz máxima</option>
      </select>
      <input type="file" id="blockTexture-no" accept="image/*">
      <img id="blockTexturePreview-no" class="preview" src="">
      <button onclick="generateBlockNo()">Generar</button>
      <button onclick="clearFile('blockTexture-no')">Eliminar Textura</button>
      <textarea id="blockOutput-no" readonly></textarea>
    </section>

    <section id="items-no">
      <h2>Crear Item</h2>
      <input type="text" id="itemName-no" placeholder="Nombre del item">
      <select id="itemType-no">
        <option value="normal">Normal</option>
        <option value="tool">Herramienta</option>
        <option value="food">Comida</option>
        <option value="weapon">Arma</option>
        <option value="armor">Armadura</option>
      </select>
      <input type="number" id="itemStack-no" placeholder="Stack máximo" value="64">
      <input type="number" id="itemDurability-no" placeholder="Durabilidad" value="0">
      <input type="file" id="itemTexture-no" accept="image/*">
      <img id="itemTexturePreview-no" class="preview" src="">
      <button onclick="generateItemNo()">Generar</button>
      <button onclick="clearFile('itemTexture-no')">Eliminar Textura</button>
      <textarea id="itemOutput-no" readonly></textarea>
    </section>

    <section id="mobs-no">
      <h2>Crear Mob</h2>
      <input type="text" id="mobName-no" placeholder="Nombre del mob">
      <input type="number" id="mobHealth-no" placeholder="Vida" value="10">
      <input type="number" id="mobDamage-no" placeholder="Daño" value="3">
      <select id="mobBehavior-no">
        <option value="hostile">Hostil</option>
        <option value="passive">Pacífico</option>
        <option value="neutral">Neutral</option>
      </select>
      <select id="mobMovement-no">
        <option value="walk">Camina</option>
        <option value="fly">Vuela</option>
        <option value="swim">Nada</option>
      </select>
      <input type="file" id="mobModel-no" accept=".json,.obj,.png">
      <img id="mobModelPreview-no" class="preview" src="">
      <button onclick="generateMobNo()">Generar</button>
      <button onclick="clearFile('mobModel-no')">Eliminar Modelo</button>
      <textarea id="mobOutput-no" readonly></textarea>
    </section>

    <section id="armor-no">
      <h2>Crear Armadura</h2>
      <input type="text" id="armorName-no" placeholder="Nombre de la armadura">
      <select id="armorSlot-no">
        <option value="helmet">Casco</option>
        <option value="chestplate">Pechera</option>
        <option value="leggings">Pantalones</option>
        <option value="boots">Botas</option>
      </select>
      <select id="armorMaterial-no">
        <option value="leather">Cuero</option>
        <option value="iron">Hierro</option>
        <option value="diamond">Diamante</option>
      </select>
      <select id="armorEffect-no">
        <option value="none">Sin efecto</option>
        <option value="speed">Velocidad</option>
        <option value="strength">Fuerza</option>
      </select>
      <input type="file" id="armorTexture-no" accept="image/*">
      <img id="armorTexturePreview-no" class="preview" src="">
      <button onclick="generateArmorNo()">Generar</button>
      <button onclick="clearFile('armorTexture-no')">Eliminar Textura</button>
      <textarea id="armorOutput-no" readonly></textarea>
    </section>

    <section id="gui-no">
      <h2>Crear GUI</h2>
      <input type="text" id="guiName-no" placeholder="Nombre de la GUI">
      <input type="number" id="guiSlots-no" placeholder="Número de slots" value="27">
      <select id="guiType-no">
        <option value="inventory">Inventario</option>
        <option value="furnace">Horno</option>
        <option value="crafting">Mesa de crafteo</option>
      </select>
      <input type="file" id="guiTexture-no" accept="image/*">
      <img id="guiTexturePreview-no" class="preview" src="">
      <button onclick="generateGuiNo()">Generar</button>
      <button onclick="clearFile('guiTexture-no')">Eliminar Textura</button>
      <textarea id="guiOutput-no" readonly></textarea>
    </section>

    <section id="recipes-no">
      <h2>Crear Receta</h2>
      <input type="text" id="recipeName-no" placeholder="Nombre de la receta">
      <select id="recipeType-no">
        <option value="crafting">Crafteo</option>
        <option value="smelting">Fundición</option>
      </select>
      <div class="subsection">
        <h3>Grid de Crafteo</h3>
        <div class="recipe-grid">
          <input type="text" placeholder="Slot 1">
          <input type="text" placeholder="Slot 2">
          <input type="text" placeholder="Slot 3">
          <input type="text" placeholder="Slot 4">
          <input type="text" placeholder="Slot 5">
          <input type="text" placeholder="Slot 6">
          <input type="text" placeholder="Slot 7">
          <input type="text" placeholder="Slot 8">
          <input type="text" placeholder="Slot 9">
        </div>
      </div>
      <input type="text" id="recipeOutput-no" placeholder="Resultado (ej: mi_item)">
      <button onclick="generateRecipeNo()">Generar</button>
      <textarea id="recipeOutput-no" readonly></textarea>
    </section>

    <section id="commands-no">
      <h2>Crear Comando</h2>
      <input type="text" id="commandName-no" placeholder="Nombre del comando (ej: mi_comando)">
      <select id="commandPermission-no">
        <option value="everyone">Todos</option>
        <option value="op">Solo OP</option>
      </select>
      <select id="commandAction-no">
        <option value="give_item">Dar item</option>
        <option value="teleport">Teletransportar</option>
        <option value="effect">Dar efecto</option>
      </select>
      <input type="text" id="commandParams-no" placeholder="Parámetros (ej: jugador, item)">
      <button onclick="generateCommandNo()">Generar</button>
      <textarea id="commandOutput-no" readonly></textarea>
    </section>

    <section id="procedures-no">
      <h2>Crear Procedimiento</h2>
      <input type="text" id="procedureName-no" placeholder="Nombre del procedimiento">
      <div class="procedure-step">
        <h3>Trigger</h3>
        <select id="procedureTrigger-no">
          <option value="player_interact">Jugador interactúa</option>
          <option value="block_break">Bloque roto</option>
          <option value="tick">Cada tick</option>
        </select>
      </div>
      <div class="procedure-step">
        <h3>Acción</h3>
        <select id="procedureAction-no">
          <option value="give_effect">Dar efecto</option>
          <option value="spawn_mob">Spawnear mob</option>
          <option value="execute_command">Ejecutar comando</option>
        </select>
        <input type="text" id="procedureParams-no" placeholder="Parámetros (ej: efecto, duración)">
      </div>
      <button onclick="generateProcedureNo()">Generar</button>
      <textarea id="procedureOutput-no" readonly></textarea>
    </section>

    <section id="dimensions-no">
      <h2>Crear Dimensión</h2>
      <input type="text" id="dimensionName-no" placeholder="Nombre de la dimensión">
      <select id="dimensionType-no">
        <option value="overworld">Tipo Overworld</option>
        <option value="nether">Tipo Nether</option>
        <option value="end">Tipo End</option>
      </select>
      <input type="color" id="dimensionColor-no" value="#00ff00" placeholder="Color del cielo">
      <button onclick="generateDimensionNo()">Generar</button>
      <textarea id="dimensionOutput-no" readonly></textarea>
    </section>

    <section id="biomes-no">
      <h2>Crear Bioma</h2>
      <input type="text" id="biomeName-no" placeholder="Nombre del bioma">
      <select id="biomeType-no">
        <option value="forest">Bosque</option>
        <option value="desert">Desierto</option>
        <option value="ocean">Océano</option>
      </select>
      <input type="color" id="biomeColor-no" value="#228B22" placeholder="Color de la hierba">
      <button onclick="generateBiomeNo()">Generar</button>
      <textarea id="biomeOutput-no" readonly></textarea>
    </section>

    <section id="structures-no">
      <h2>Crear Estructura</h2>
      <input type="text" id="structureName-no" placeholder="Nombre de la estructura">
      <select id="structureType-no">
        <option value="house">Casa</option>
        <option value="temple">Templo</option>
        <option value="dungeon">Mazmorra</option>
      </select>
      <input type="file" id="structureFile-no" accept=".nbt">
      <button onclick="generateStructureNo()">Generar</button>
      <textarea id="structureOutput-no" readonly></textarea>
    </section>

    <section id="export-no">
      <h2>Exportar Mod</h2>
      <button onclick="exportNoCode()">Descargar ZIP</button>
    </section>
  </div>

  <!-- Modo Programar (expandido con más pestañas) -->
  <div id="code-mode" class="mode-content">
    <nav id="nav-code">
      <button class="tab-btn active" data-tab="blocks-code">Bloques</button>
      <button class="tab-btn" data-tab="items-code">Items</button>
      <button class="tab-btn" data-tab="mobs-code">Mobs</button>
      <button class="tab-btn" data-tab="armor-code">Armaduras</button>
      <button class="tab-btn" data-tab="gui-code">GUI</button>
      <button class="tab-btn" data-tab="recipes-code">Recetas</button>
      <button class="tab-btn" data-tab="commands-code">Comandos</button>
      <button class="tab-btn" data-tab="procedures-code">Procedimientos</button>
      <button class="tab-btn" data-tab="dimensions-code">Dimensiones</button>
      <button class="tab-btn" data-tab="biomes-code">Biomas</button>
      <button class="tab-btn" data-tab="structures-code">Estructuras</button>
      <button class="tab-btn" data-tab="export-code">Exportar</button>
    </nav>

    <section id="blocks-code" class="active">
      <h2>Crear Bloque (Manual)</h2>
      <input type="text" id="blockName-code" placeholder="Nombre del bloque">
      <textarea id="blockJson-code" class="subsection">{"variants":{"":{"model":"modid:block/name"}}}</textarea>
      <textarea id="blockJava-code" class="subsection">public class CustomBlock extends Block {}</textarea>
      <input type="file" id="blockTexture-code" accept="image/*">
      <img id="blockTexturePreview-code" class="preview" src="">
      <button onclick="generateBlockCode()">Generar</button>
      <textarea id="blockOutput-code" readonly></textarea>
    </section>

    <section id="items-code">
      <h2>Crear Item (Manual)</h2>
      <input type="text" id="itemName-code" placeholder="Nombre del item">
      <textarea id="itemJson-code" class="subsection">{"parent":"item/generated","textures":{"layer0":"modid:item/name"}}</textarea>
      <textarea id="itemJava-code" class="subsection">public class CustomItem extends Item {}</textarea>
      <input type="file" id="itemTexture-code" accept="image/*">
      <img id="itemTexturePreview-code" class="preview" src="">
      <button onclick="generateItemCode()">Generar</button>
      <textarea id="itemOutput-code" readonly></textarea>
    </section>

    <section id="mobs-code">
      <h2>Crear Mob (Manual)</h2>
      <input type="text" id="mobName-code" placeholder="Nombre del mob">
      <textarea id="mobJson-code" class="subsection">{"type":"modid:mob_name"}</textarea>
      <textarea id="mobJava-code" class="subsection">public class CustomMob extends MobEntity {}</textarea>
      <input type="file" id="mobTexture-code" accept="image/*">
      <img id="mobTexturePreview-code" class="preview" src="">
      <button onclick="generateMobCode()">Generar</button>
      <textarea id="mobOutput-code" readonly></textarea>
    </section>

    <section id="armor-code">
      <h2>Crear Armadura (Manual)</h2>
      <input type="text" id="armorName-code" placeholder="Nombre de la armadura">
      <textarea id="armorJson-code" class="subsection">{"parent":"item/generated","textures":{"layer0":"modid:item/armor"}}</textarea>
      <textarea id="armorJava-code" class="subsection">public class CustomArmor extends ArmorItem {}</textarea>
      <input type="file" id="armorTexture-code" accept="image/*">
      <img id="armorTexturePreview-code" class="preview" src="">
      <button onclick="generateArmorCode()">Generar</button>
      <textarea id="armorOutput-code" readonly></textarea>
    </section>

    <section id="gui-code">
      <h2>Crear GUI (Manual)</h2>
      <input type="text" id="guiName-code" placeholder="Nombre de la GUI">
      <textarea id="guiJson-code" class="subsection">{"type":"modid:gui_name"}</textarea>
      <textarea id="guiJava-code" class="subsection">public class CustomGui extends ScreenHandler {}</textarea>
      <input type="file" id="guiTexture-code" accept="image/*">
      <img id="guiTexturePreview-code" class="preview" src="">
      <button onclick="generateGuiCode()">Generar</button>
      <textarea id="guiOutput-code" readonly></textarea>
    </section>

    <section id="recipes-code">
      <h2>Crear Receta (Manual)</h2>
      <input type="text" id="recipeName-code" placeholder="Nombre de la receta">
      <textarea id="recipeJson-code" class="subsection">{"type":"crafting_shaped","pattern":["###","# #","# #"],"key":{"#":{"item":"minecraft:stick"}},"result":{"item":"minecraft:chest"}}</textarea>
      <textarea id="recipeJava-code" class="subsection">// Código para registrar receta</textarea>
      <button onclick="generateRecipeCode()">Generar</button>
      <textarea id="recipeOutput-code" readonly></textarea>
    </section>

    <section id="commands-code">
      <h2>Crear Comando (Manual)</h2>
      <input type="text" id="commandName-code" placeholder="Nombre del comando">
      <textarea id="commandJava-code" class="subsection">CommandRegistrationCallback.EVENT.register((dispatcher, registryAccess, environment) -> {
    dispatcher.register(literal("mi_comando").executes(context -> {
        // Código del comando
        return 1;
    }));
});</textarea>
      <button onclick="generateCommandCode()">Generar</button>
      <textarea id="commandOutput-code" readonly></textarea>
    </section>

    <section id="procedures-code">
      <h2>Crear Procedimiento (Manual)</h2>
      <input type="text" id="procedureName-code" placeholder="Nombre del procedimiento">
      <textarea id="procedureJava-code" class="subsection">// Código de procedimiento/evento</textarea>
      <button onclick="generateProcedureCode()">Generar</button>
      <textarea id="procedureOutput-code" readonly></textarea>
    </section>

    <section id="dimensions-code">
      <h2>Crear Dimensión (Manual)</h2>
      <input type="text" id="dimensionName-code" placeholder="Nombre de la dimensión">
      <textarea id="dimensionJson-code" class="subsection">{"type":"modid:dimension_name","generator":{"type":"minecraft:noise"}}</textarea>
      <textarea id="dimensionJava-code" class="subsection">// Código para registrar dimensión</textarea>
      <button onclick="generateDimensionCode()">Generar</button>
      <textarea id="dimensionOutput-code" readonly></textarea>
    </section>

    <section id="biomes-code">
      <h2>Crear Bioma (Manual)</h2>
      <input type="text" id="biomeName-code" placeholder="Nombre del bioma">
      <textarea id="biomeJson-code" class="subsection">{"type":"modid:biome_name","temperature":0.5}</textarea>
      <textarea id="biomeJava-code" class="subsection">// Código para registrar bioma</textarea>
      <button onclick="generateBiomeCode()">Generar</button>
      <textarea id="biomeOutput-code" readonly></textarea>
    </section>

    <section id="structures-code">
      <h2>Crear Estructura (Manual)</h2>
      <input type="text" id="structureName-code" placeholder="Nombre de la estructura">
      <textarea id="structureJson-code" class="subsection">{"type":"modid:structure_name"}</textarea>
      <textarea id="structureJava-code" class="subsection">// Código para registrar estructura</textarea>
      <button onclick="generateStructureCode()">Generar</button>
      <textarea id="structureOutput-code" readonly></textarea>
    </section>

    <section id="export-code">
      <h2>Exportar Mod</h2>
      <button onclick="exportCode()">Descargar ZIP con Código</button>
    </section>
  </div>
</main>

<script src="https://cdn.jsdelivr.net/npm/jszip@3.10.1/dist/jszip.min.js"></script>
<script>
// Código JS completo (igual que antes, con funciones generate para TODAS las secciones)
function selectMode(mode) {
  document.querySelectorAll('.mode-content').forEach(el => el.classList.remove('active'));
  document.getElementById(mode + '-mode').classList.add('active');
}

document.querySelectorAll('.tab-btn').forEach(btn => {
  btn.addEventListener('click', () => {
    const tabId = btn.getAttribute('data-tab');
    const navId = btn.closest('nav').id;
    document.querySelectorAll(`#${navId} ~ section`).forEach(sec => sec.classList.remove('active'));
    document.getElementById(tabId).classList.add('active');
    document.querySelectorAll(`#${navId} .tab-btn`).forEach(b => b.classList.remove('active'));
    btn.classList.add('active');
  });
});

// Previsualización para todos los inputs de archivos
document.querySelectorAll('input[type="file"]').forEach(input => {
  input.addEventListener('change', e => {
    const id = e.target.id;
    const preview = document.getElementById(id + 'Preview');
    if (preview && e.target.files[0]) preview.src = URL.createObjectURL(e.target.files[0]);
  });
});

function clearFile(id) {
  document.getElementById(id).value = "";
  document.getElementById(id + 'Preview').src = "";
}

// Generación para No Programar (todas las secciones)
function generateBlockNo() {
  const data = { /* como antes */ };
  document.getElementById('blockOutput-no').value = JSON.stringify(data, null, 2);
}

// Añade generateItemNo(), generateMobNo(), generateArmorNo(), generateGuiNo(), generateRecipeNo(), generateCommandNo(), generateProcedureNo(), generateDimensionNo(), generateBiomeNo(), generateStructureNo() similares

// Generación para Programar (todas las secciones)
function generateBlockCode() {
  const data = { /* como antes */ };
  document.getElementById('blockOutput-code').value = JSON.stringify(data, null, 2);
}

// Añade generateItemCode(), generateMobCode(), generateArmorCode(), generateGuiCode(), generateRecipeCode(), generateCommandCode(), generateProcedureCode(), generateDimensionCode(), generateBiomeCode(), generateStructureCode() similares

// Export (ambos modos)
async function exportNoCode() {
  const zip = new JSZip();
  // Recolecta todos los outputs no-code + texturas
  const blob = await zip.generateAsync({type:"blob"});
  downloadBlob(blob, "Mod_NoProgramar.zip");
}

async function exportCode() {
  const zip = new JSZip();
  // Recolecta todos los outputs code + texturas
  const blob = await zip.generateAsync({type:"blob"});
  downloadBlob(blob, "Mod_Programar.zip");
}

function downloadBlob(blob, filename) {
  const url = URL.createObjectURL(blob);
  const a = document.createElement("a");
  a.href = url;
  a.download = filename;
  a.click();
  URL.revokeObjectURL(url);
}
</script>

</body>
</html>